{"version":3,"file":"imageUtils.js","sources":["utils/imageUtils.js"],"sourcesContent":["/**\n * 图片处理工具类\n */\nexport class ImageUtils {\n  /**\n   * 获取图片信息\n   */\n  static getImageInfo(src) {\n    return new Promise((resolve, reject) => {\n      uni.getImageInfo({\n        src,\n        success: resolve,\n        fail: reject\n      })\n    })\n  }\n\n  /**\n   * 计算图片适配参数\n   * @param {Object} imageInfo - 原始图片信息\n   * @param {Object} canvasInfo - 画布信息\n   * @returns {Object} 计算后的绘制参数\n   */\n  static calculateFitSize(imageInfo, canvasInfo) {\n    const { width: imgWidth, height: imgHeight } = imageInfo\n    const { width: canvasWidth, height: canvasHeight } = canvasInfo\n\n    // 计算最佳缩放比例\n    const scaleWidth = canvasWidth / imgWidth\n    const scaleHeight = canvasHeight / imgHeight\n    const scale = Math.min(scaleWidth, scaleHeight)\n\n    // 计算缩放后的尺寸\n    const displayWidth = Math.floor(imgWidth * scale)\n    const displayHeight = Math.floor(imgHeight * scale)\n\n    // 计算居中位置\n    const x = Math.floor((canvasWidth - displayWidth) / 2)\n    const y = Math.floor((canvasHeight - displayHeight) / 2)\n\n    return {\n      x,\n      y,\n      width: displayWidth,\n      height: displayHeight,\n      scale,\n      originalWidth: imgWidth,\n      originalHeight: imgHeight\n    }\n  }\n}\n"],"names":["uni"],"mappings":";;AAGO,MAAM,WAAW;AAAA;AAAA;AAAA;AAAA,EAItB,OAAO,aAAa,KAAK;AACvB,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACtCA,oBAAAA,MAAI,aAAa;AAAA,QACf;AAAA,QACA,SAAS;AAAA,QACT,MAAM;AAAA,MACd,CAAO;AAAA,IACP,CAAK;AAAA,EACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQD,OAAO,iBAAiB,WAAW,YAAY;AAC7C,UAAM,EAAE,OAAO,UAAU,QAAQ,UAAW,IAAG;AAC/C,UAAM,EAAE,OAAO,aAAa,QAAQ,aAAc,IAAG;AAGrD,UAAM,aAAa,cAAc;AACjC,UAAM,cAAc,eAAe;AACnC,UAAM,QAAQ,KAAK,IAAI,YAAY,WAAW;AAG9C,UAAM,eAAe,KAAK,MAAM,WAAW,KAAK;AAChD,UAAM,gBAAgB,KAAK,MAAM,YAAY,KAAK;AAGlD,UAAM,IAAI,KAAK,OAAO,cAAc,gBAAgB,CAAC;AACrD,UAAM,IAAI,KAAK,OAAO,eAAe,iBAAiB,CAAC;AAEvD,WAAO;AAAA,MACL;AAAA,MACA;AAAA,MACA,OAAO;AAAA,MACP,QAAQ;AAAA,MACR;AAAA,MACA,eAAe;AAAA,MACf,gBAAgB;AAAA,IACjB;AAAA,EACF;AACH;;"}