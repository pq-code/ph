{"version":3,"file":"useWatermark.js","sources":["pages/home/ph/addWatermark/hooks/useWatermark.js"],"sourcesContent":["import { ref } from 'vue'\n\nexport const useWatermark = (canvasId) => {\n  // 绘制图片\n  const addWatermark = async ({ image, style, info }) => {\n    if (!image?.path) {\n      console.error('无效的图片路径')\n      return\n    }\n\n    try {\n      const ctx = uni.createCanvasContext(canvasId)\n      \n      // 清空画布\n      ctx.clearRect(0, 0, image.canvasWidth, image.canvasHeight)\n      \n      // 绘制原图\n      ctx.drawImage(\n        image.path,\n        image.x,\n        image.y,\n        image.drawWidth,\n        image.drawHeight\n      )\n\n      // 应用绘制\n      await new Promise(resolve => ctx.draw(false, resolve))\n      \n    } catch (error) {\n      console.error('绘制失败:', error)\n      uni.showToast({\n        title: '绘制失败',\n        icon: 'none'\n      })\n    }\n  }\n\n  return {\n    addWatermark\n  }\n} \n\n"],"names":["uni"],"mappings":";;AAEY,MAAC,eAAe,CAAC,aAAa;AAExC,QAAM,eAAe,OAAO,EAAE,OAAO,OAAO,KAAI,MAAO;AACrD,QAAI,EAAC,+BAAO,OAAM;AAChBA,oBAAAA,MAAc,MAAA,SAAA,yDAAA,SAAS;AACvB;AAAA,IACD;AAED,QAAI;AACF,YAAM,MAAMA,cAAAA,MAAI,oBAAoB,QAAQ;AAG5C,UAAI,UAAU,GAAG,GAAG,MAAM,aAAa,MAAM,YAAY;AAGzD,UAAI;AAAA,QACF,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,MACP;AAGD,YAAM,IAAI,QAAQ,aAAW,IAAI,KAAK,OAAO,OAAO,CAAC;AAAA,IAEtD,SAAQ,OAAO;AACdA,oBAAAA,MAAc,MAAA,SAAA,0DAAA,SAAS,KAAK;AAC5BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACd,CAAO;AAAA,IACF;AAAA,EACF;AAED,SAAO;AAAA,IACL;AAAA,EACD;AACH;;"}