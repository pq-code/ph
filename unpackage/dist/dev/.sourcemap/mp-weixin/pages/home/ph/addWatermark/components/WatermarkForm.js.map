{"version":3,"file":"WatermarkForm.js","sources":["pages/home/ph/addWatermark/components/WatermarkForm.vue","/Users/pq/code/ph/pages/home/ph/addWatermark/components/WatermarkForm.vue?type=component"],"sourcesContent":["<template>\n  <view class=\"watermark-form\">\n    <u-form \n      ref=\"form1\"\n      labelWidth=\"100\" \n      labelPosition=\"left\" \n      labelAlign=\"left\"  \n      :model=\"modelValue\" \n      :disabled=\"disabled\"\n    >\n\n      <u-form-item \n        v-for=\"field in fields\" \n        :key=\"field.field\"\n        :label=\"field.label\"\n        :required=\"field.required\"\n        \n      >\n        <!-- 输入框 -->\n        <template v-if=\"field.type === 'input'\">\n          <u-input \n            v-model=\"modelValue[field.field]\"\n            :placeholder=\"field.placeholder\"\n            @input=\"onInputChange\"\n          />\n        </template>\n        \n        <!-- 时间选择器 -->\n        <template v-else-if=\"field.type === 'datetime'\">\n          <u-input \n            style=\"width: 100%;\"\n            v-model=\"modelValue[field.field]\"\n            :placeholder=\"field.placeholder\"\n            @focus=\"showPicker = true\"\n            :clearable=\"false\"\n            right-icon=\"calendar\"\n          />\n          <u-datetime-picker\n            :show=\"showPicker\"\n            v-model=\"tempDate\"\n            mode=\"datetime\"\n            format=\"YYYY-MM-DD HH:mm:ss\"\n            :defaultValue=\"dayjs().valueOf()\"\n            @confirm=\"(value) => {\n              handleDateConfirm(value,field.field)\n            }\"\n            @cancel=\"showPicker = false\"\n            :closeOnClickOverlay=\"false\"\n          />\n        </template>\n        \n        <!-- 文本域 -->\n        <template v-else-if=\"field.type === 'textarea'\">\n          <u-textarea\n            v-model=\"modelValue[field.field]\"\n            :placeholder=\"field.placeholder\"\n            :maxlength=\"field.maxlength\"\n            @input=\"onInputChange\"\n          />\n        </template>\n      </u-form-item>\n    </u-form>\n    <MapDisplay \n      :latitude=\"latitude\"\n      :longitude=\"longitude\"\n      :markers=\"covers\"\n    />\n  </view>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue';\nimport dayjs from 'dayjs'\nimport MapDisplay from './MapDisplay.vue'\n\nconst props = defineProps({\n  modelValue: {\n    type: Object,\n    required: true\n  },\n  fields: {\n    type: Array,\n    default: () => []\n  },\n  disabled: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['dataChanged', 'update:modelValue']); // 添加缺失的事件声明\n\nconst showPicker = ref(false)\nconst tempDate = ref(dayjs().valueOf())\n\n// 保留 covers 的定义（如果需要在父组件操作标记点）\nconst covers = ref([{\n  latitude: 39.90923,\n  longitude: 116.397428,\n  title: '当前位置'\n}])\n\nconst handleDateConfirm = (value, field) => {\n  const formattedDate = dayjs(value.value).format('YYYY-MM-DD HH:mm:ss');\n  const newModelValue = { \n    ...props.modelValue, \n    [field] : formattedDate \n  };\n  tempDate.value = formattedDate\n  emit('update:modelValue', newModelValue);\n  showPicker.value = false;\n};\n\nconst onInputChange = () => {\n  console.log('modelValue',props.modelValue)\n  emit('update:modelValue', props.modelValue);\n};\n\n</script>\n\n<style lang=\"less\" scoped>\n.watermark-form {\n  background: #ffffff;\n  border-radius: 8px;\n  padding: 15px;\n}\n.u-form-item__body__right__content__slot {\n  .u-popup {\n    flex: 0;\n  }\n}\n\n</style> \n","import Component from '/Users/pq/code/ph/pages/home/ph/addWatermark/components/WatermarkForm.vue'\nwx.createComponent(Component)"],"names":["ref","dayjs","uni"],"mappings":";;;;;;;;;;;;;;;;;;AAyEA,MAAM,aAAa,MAAW;;;;;;;;;;;;;;;;;;;AAE9B,UAAM,QAAQ;AAed,UAAM,OAAO;AAEb,UAAM,aAAaA,cAAG,IAAC,KAAK;AAC5B,UAAM,WAAWA,cAAG,IAACC,oBAAO,EAAC,QAAO,CAAE;AAGtC,UAAM,SAASD,cAAG,IAAC,CAAC;AAAA,MAClB,UAAU;AAAA,MACV,WAAW;AAAA,MACX,OAAO;AAAA,IACT,CAAC,CAAC;AAEF,UAAM,oBAAoB,CAAC,OAAO,UAAU;AAC1C,YAAM,gBAAgBC,cAAAA,MAAM,MAAM,KAAK,EAAE,OAAO,qBAAqB;AACrE,YAAM,gBAAgB;AAAA,QACpB,GAAG,MAAM;AAAA,QACT,CAAC,KAAK,GAAI;AAAA,MACd;AACE,eAAS,QAAQ;AACjB,WAAK,qBAAqB,aAAa;AACvC,iBAAW,QAAQ;AAAA,IACrB;AAEA,UAAM,gBAAgB,MAAM;AAC1BC,oBAAA,MAAA,MAAA,OAAA,kEAAY,cAAa,MAAM,UAAU;AACzC,WAAK,qBAAqB,MAAM,UAAU;AAAA,IAC5C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnHA,GAAG,gBAAgB,SAAS;"}