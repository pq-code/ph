{"version":3,"file":"useWatermark.js","sources":["hooks/useWatermark.js"],"sourcesContent":["import { ref } from 'vue'\nimport { WatermarkRenderer } from '../utils/watermarkRenderer'\n\nexport function useWatermark(canvasId) {\n  const renderer = ref(null)\n  \n  /**\n   * 初始化渲染器\n   */\n  const initRenderer = () => {\n    const ctx = uni.createCanvasContext(canvasId)\n    renderer.value = new WatermarkRenderer(ctx)\n  }\n\n  /**\n   * 添加水印\n   */\n  const addWatermark = async (options) => {\n    try {\n      if (!renderer.value) {\n        initRenderer()\n      }\n      \n      await renderer.value.render(options)\n      return true\n    } catch (error) {\n      console.error('水印添加失败:', error)\n      uni.showToast({\n        title: '水印添加失败',\n        icon: 'none'\n      })\n      return false\n    }\n  }\n\n  return {\n    addWatermark\n  }\n} \n"],"names":["ref","uni","WatermarkRenderer"],"mappings":";;;AAGO,SAAS,aAAa,UAAU;AACrC,QAAM,WAAWA,cAAG,IAAC,IAAI;AAKzB,QAAM,eAAe,MAAM;AACzB,UAAM,MAAMC,cAAAA,MAAI,oBAAoB,QAAQ;AAC5C,aAAS,QAAQ,IAAIC,wBAAiB,kBAAC,GAAG;AAAA,EAC3C;AAKD,QAAM,eAAe,OAAO,YAAY;AACtC,QAAI;AACF,UAAI,CAAC,SAAS,OAAO;AACnB,qBAAc;AAAA,MACf;AAED,YAAM,SAAS,MAAM,OAAO,OAAO;AACnC,aAAO;AAAA,IACR,SAAQ,OAAO;AACdD,oBAAAA,MAAc,MAAA,SAAA,+BAAA,WAAW,KAAK;AAC9BA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,MACd,CAAO;AACD,aAAO;AAAA,IACR;AAAA,EACF;AAED,SAAO;AAAA,IACL;AAAA,EACD;AACH;;"}