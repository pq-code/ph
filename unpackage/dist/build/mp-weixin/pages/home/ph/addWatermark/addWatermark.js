"use strict";const e=require("../../../../common/vendor.js"),a=require("./hooks/useImageHandler.js"),r=require("./hooks/useWatermark.js"),o=require("./hooks/useWatermarkForm.js"),n=require("./constants/watermarkConfig.js");if(!Array){e.resolveComponent("u-icon")()}Math||((()=>"../../../../uni_modules/uview-plus/components/u-icon/u-icon.js")+u+t+s)();const s=()=>"../../../../components/pages/page.js",u=()=>"./components/WatermarkTypeSelector.js",t=()=>"./components/WatermarkForm.js",l={__name:"addWatermark",setup(s){const u=e.ref(1),t=e.ref(n.WATERMARK_TYPES[0].style),{imageInfo:l,isProcessing:i,handleImageSelect:m}=a.useImageHandler(),{addWatermark:c}=r.useWatermark("watermark"),{formData:v,getFormFields:d,validateForm:f,resetForm:p}=o.useWatermarkForm(),k=e=>{t.value=e,l.value&&g()},g=async()=>{l.value&&t.value&&await c({image:l.value,style:t.value,info:v.value})},j=async()=>{if(i.value)return;await m()&&await g()},W=async()=>{l.value||e.index.showToast({title:"请先选择图片",icon:"none"})};return(a,r)=>{var o,n;return e.e({a:(null==(o=e.unref(l))?void 0:o.canvasWidth)+"px",b:(null==(n=e.unref(l))?void 0:n.canvasHeight)+"px",c:!e.unref(l)},e.unref(l)?{}:{d:e.p({name:"camera-fill",size:"40",color:"#999"})},{e:e.o(j),f:e.o(k),g:e.o((e=>u.value=e)),h:e.p({modelValue:u.value}),i:t.value},t.value?{j:e.o(g),k:e.o((a=>e.isRef(v)?v.value=a:null)),l:e.p({fields:e.unref(d)(t.value),disabled:e.unref(i),modelValue:e.unref(v)})}:{},{m:e.o(W),n:e.p({title:"添加水印",rButton:"生成图片",rButtonDisabled:e.unref(i)})})}}},i=e._export_sfc(l,[["__scopeId","data-v-ee202a1e"]]);wx.createPage(i);
